// <![CDATA[
(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.TocJumper = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},autoComplete=function(){function e(e){function t(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}function o(e,t,o){e.attachEvent?e.attachEvent("on"+t,o):e.addEventListener(t,o)}function s(e,t,o){e.detachEvent?e.detachEvent("on"+t,o):e.removeEventListener(t,o)}function n(e,s,n,c){o(c||document,s,function(o){for(var s,c=o.target||o.srcElement;c&&!(s=t(c,e));)c=c.parentElement;s&&n.call(c,o)})}if(document.querySelector){var c={selector:0,source:0,minChars:3,delay:150,offsetLeft:0,offsetTop:1,cache:1,menuClass:"",container:"body",renderItem:function(e,t){t=t.replace(/[-\/\\^$*+?.()|\[\]{}]/g,"\\$&");var o=new RegExp("("+t.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+e+'">'+e.replace(o,"<b>$1</b>")+"</div>"},onSelect:function(e,t,o){}};for(var l in e)e.hasOwnProperty(l)&&(c[l]=e[l]);for(var a="object"==_typeof(c.selector)?[c.selector]:document.querySelectorAll(c.selector),u=0;u<a.length;u++){var i=a[u];i.sc=document.createElement("div"),i.sc.className="autocomplete-suggestions "+c.menuClass,"body"!==c.container&&(i.sc.className=i.sc.className+" autocomplete-suggestions--in-container"),i.autocompleteAttr=i.getAttribute("autocomplete"),i.setAttribute("autocomplete","off"),i.cache={},i.last_val="",i.updateSC=function(e,t){var o=i.getBoundingClientRect();if("body"===c.container&&(i.sc.style.left=Math.round(o.left+(window.pageXOffset||document.documentElement.scrollLeft)+c.offsetLeft)+"px",i.sc.style.top=Math.round(o.bottom+(window.pageYOffset||document.documentElement.scrollTop)+c.offsetTop)+"px"),i.sc.style.width=Math.round(o.right-o.left)+"px",!e&&(i.sc.style.display="block",i.sc.maxHeight||(i.sc.maxHeight=parseInt((window.getComputedStyle?getComputedStyle(i.sc,null):i.sc.currentStyle).maxHeight)),i.sc.suggestionHeight||(i.sc.suggestionHeight=i.sc.querySelector(".autocomplete-suggestion").offsetHeight),i.sc.suggestionHeight))if(t){var s=i.sc.scrollTop,n=t.getBoundingClientRect().top-i.sc.getBoundingClientRect().top;n+i.sc.suggestionHeight-i.sc.maxHeight>0?i.sc.scrollTop=n+i.sc.suggestionHeight+s-i.sc.maxHeight:n<0&&(i.sc.scrollTop=n+s)}else i.sc.scrollTop=0},o(window,"resize",i.updateSC),document.querySelector(c.container).appendChild(i.sc),n("autocomplete-suggestion","mouseleave",function(e){var t=i.sc.querySelector(".autocomplete-suggestion.selected");t&&setTimeout(function(){t.className=t.className.replace("selected","")},20)},i.sc),n("autocomplete-suggestion","mouseover",function(e){var t=i.sc.querySelector(".autocomplete-suggestion.selected");t&&(t.className=t.className.replace("selected","")),this.className+=" selected"},i.sc),n("autocomplete-suggestion","mousedown",function(e){if(t(this,"autocomplete-suggestion")){var o=this.getAttribute("data-val");i.value=o,c.onSelect(e,o,this),i.sc.style.display="none"}},i.sc),i.blurHandler=function(){try{var e=document.querySelector(".autocomplete-suggestions:hover")}catch(e){var e=0}e?i!==document.activeElement&&setTimeout(function(){i.focus()},20):(i.last_val=i.value,i.sc.style.display="none",setTimeout(function(){i.sc.style.display="none"},350))},o(i,"blur",i.blurHandler);var r=function(e){var t=i.value;if(i.cache[t]=e,e.length&&t.length>=c.minChars){for(var o="",s=0;s<e.length;s++)o+=c.renderItem(e[s],t);i.sc.innerHTML=o,i.updateSC(0)}else i.sc.style.display="none"};i.keydownHandler=function(e){var t=window.event?e.keyCode:e.which;if((40==t||38==t)&&i.sc.innerHTML){var o,s=i.sc.querySelector(".autocomplete-suggestion.selected");return s?(o=40==t?s.nextSibling:s.previousSibling,o?(s.className=s.className.replace("selected",""),o.className+=" selected",i.value=o.getAttribute("data-val")):(s.className=s.className.replace("selected",""),i.value=i.last_val,o=0)):(o=40==t?i.sc.querySelector(".autocomplete-suggestion"):i.sc.childNodes[i.sc.childNodes.length-1],o.className+=" selected",i.value=o.getAttribute("data-val")),i.updateSC(0,o),!1}if(27==t)i.value=i.last_val,i.sc.style.display="none";else if(13==t||9==t){var s=i.sc.querySelector(".autocomplete-suggestion.selected");s&&"none"!=i.sc.style.display&&(c.onSelect(e,s.getAttribute("data-val"),s),setTimeout(function(){i.sc.style.display="none"},20))}},o(i,"keydown",i.keydownHandler),i.keyupHandler=function(e){var t=window.event?e.keyCode:e.which;if(!t||(t<35||t>40)&&13!=t&&27!=t){var o=i.value;if(o.length>=c.minChars){if(o!=i.last_val){if(i.last_val=o,clearTimeout(i.timer),c.cache){if(o in i.cache)return void r(i.cache[o]);for(var s=1;s<o.length-c.minChars;s++){var n=o.slice(0,o.length-s);if(n in i.cache&&!i.cache[n].length)return void r([])}}i.timer=setTimeout(function(){c.source(o,r)},c.delay)}}else i.last_val=o,i.sc.style.display="none"}},o(i,"keyup",i.keyupHandler),i.focusHandler=function(e){i.last_val="\n",i.keyupHandler(e)},c.minChars||o(i,"focus",i.focusHandler)}this.destroy=function(){for(var e=0;e<a.length;e++){var t=a[e];s(window,"resize",t.updateSC),s(t,"blur",t.blurHandler),s(t,"focus",t.focusHandler),s(t,"keydown",t.keydownHandler),s(t,"keyup",t.keyupHandler),t.autocompleteAttr?t.setAttribute("autocomplete",t.autocompleteAttr):t.removeAttribute("autocomplete"),document.querySelector(c.container).removeChild(t.sc),t=null}}}}return e}();!function(){"function"==typeof define&&define.amd?define("autoComplete",function(){return autoComplete}):"undefined"!=typeof module&&module.exports?module.exports=autoComplete:window.autoComplete=autoComplete}();

},{}],2:[function(require,module,exports){
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),template=require("./template"),AutoComplete=require("./auto-complete.js"),TocJumper=function(){function e(n){_classCallCheck(this,e),this.data=null,this.opt={id:"toc_jumper",selector:"",transform:null,key:"i"};for(var t in n)n.hasOwnProperty(t)&&(this.opt[t]=n[t]);this.log=console.log.bind(console,"TocJumper:"),this.log("init")}return _createClass(e,[{key:"scroll",value:function(e){e in this.data&&(this.log(e),this.data[e].scrollIntoView(!0))}},{key:"hook",value:function(){var e=this;this.data=make_index(this.opt.selector,this.opt.transform),css_inject({id:this.opt.id}),document.body.addEventListener("keydown",function(n){"INPUT"!==n.target.nodeName&&(n.key!==e.opt.key||n.ctrlKey||e.dlg())})}},{key:"dlg",value:function(){var e=this,n=document.getElementById(this.opt.id);if(n)return focus(n);n=document.createElement("div"),n.id=this.opt.id;var t=this.opt.id+"_container";n.innerHTML='<span id="'+t+'"><input size="40" spellcheck="false" /></span>\n<span id="'+this.opt.id+'_close" title="Close"><span>&times;</span></span>',document.body.appendChild(n);var o=n.querySelector("input"),i=new AutoComplete({selector:o,minChars:1,delay:50,container:"#"+t,source:function(n,t){var o=[];for(var i in e.data)i.toLowerCase().indexOf(n.toLowerCase())!==-1&&o.push(i);t(o)},onSelect:function(n,t,o){return e.scroll(t)}}),r=function(){i.destroy(),document.body.removeChild(n)};n.querySelector("#"+this.opt.id+"_close").onclick=r,n.addEventListener("keydown",function(n){"Enter"===n.key&&e.scroll(o.value),n.key.match(/^Esc/)&&r()}),focus(n)}}]),e}();module.exports=TocJumper;var make_index=function(e,n){for(var t=document.querySelectorAll(e),o={},i={},r=0;r<t.length;++r){var l=t[r],a=n?n(l.innerText):l.innerText;i[a]=(i[a]||0)+1,a in o&&(a=a+" <"+i[a]+">"),o[a]=l}return o},css_inject=function(e){var n=document.createElement("style"),t=template("/* auto-complete.js */\n.autocomplete-suggestions {\n  text-align: left;\n  cursor: default;\n  border: 1px solid #ccc;\n  border-top: 0;\n  background: white;\n  box-shadow: -1px 1px 3px rgba(0, 0, 0, .1);\n\n  position: absolute;\n  display: none;\n  z-index: 9999;\n  max-height: 15em;\n  overflow: hidden;\n  overflow-y: auto;\n  box-sizing: border-box;\n}\n.autocomplete-suggestion {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.autocomplete-suggestion.selected {\n  background: #eee;\n}\n\n/* toc-jumper */\n#<%= id %> {\n  border: 1px solid #a9a9a9;\n  padding: 0.8em;\n  background-color: white;\n  color: black;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, .4);\n  position: fixed;\n  top: 4em;\n  right: .5em;\n}\n\n#<%= id %>_close {\n  margin-left: 1em;\n  font-weight: bold;\n  cursor: pointer;\n  text-align: center;\n  line-height: 2em;\n  width: 2em;\n  height: 2em;\n  display: inline-block;\n}\n\n#<%= id %>_close > span {\n  display: inline-block;\n}\n\n#<%= id %>_close:hover {\n  background-color: #e81123;\n  color: white;\n}\n");n.innerHTML=t(e),document.body.appendChild(n)},focus=function(e){setTimeout(function(){return e.querySelector("input").focus()},1)};

},{"./auto-complete.js":1,"./template":3}],3:[function(require,module,exports){
"use strict";var noMatch=/(.)^/,escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},escaper=/\\|'|\r|\n|\u2028|\u2029/g,escapeChar=function(e){return"\\"+escapes[e]},templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};module.exports=function(e){var n=templateSettings,t=RegExp([(n.escape||noMatch).source,(n.interpolate||noMatch).source,(n.evaluate||noMatch).source].join("|")+"|$","g"),r=0,a="__p+='";e.replace(t,function(n,t,c,o,u){return a+=e.slice(r,u).replace(escaper,escapeChar),r=u+n.length,t?a+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":c?a+="'+\n((__t=("+c+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),n}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";var c;try{c=new Function(n.variable||"obj",a)}catch(e){throw e.source=a,e}var o=function(e){return c.call(this,e)},u=n.variable||"obj";return o.source="function("+u+"){\n"+a+"}",o};

},{}]},{},[2])(2)
});// ]]>
